(()=>{"use strict";const e=e=>{let t=[];return{name:e,tasks:t,addTask:function(e,c,n,o,i=!1){let a=((e,t,c,n,o=!1)=>({title:e,description:t,dueDate:c,priority:n,complete:o}))(e,c,n,o,i);t.push(a)},delTask:function(e){t.splice(e,1)},toggleTaskCompletion:function(e){let c=t[e];c.complete=!1===c.complete},getTasks:()=>t}};(()=>{let t=(()=>{let t,c=[];function n(){localStorage.setItem("savedProjects",JSON.stringify({projects:c}))}function o(){JSON.parse(localStorage.getItem("savedProjects")).projects.forEach((n=>{let o=e(n.name);n.tasks.forEach((e=>{o.addTask(e.title,e.description,e.dueDate,e.priority,e.complete)})),c.push(o),t=c[0]}))}return null===localStorage.getItem("savedProjects")?(t=e("Default"),c.push(t)):o(),{createProject:function(t){let o=e(t);c.push(o),n()},switchActiveProject:function(e){t=e},delProject:function(e){c[e]!==t&&(c.splice(e,1),n())},getActiveProject:()=>t,getProjects:()=>c,saveProjects:n,loadProjects:o}})(),c=document.querySelector(".projects"),n=document.querySelector(".add-project-input"),o=document.querySelector(".add-project-btn"),i=document.querySelector(".add-task-btn"),a=document.querySelector(".overlay"),r=document.querySelectorAll(".close-modal"),l=document.querySelector("#task-name"),d=document.querySelector("#date"),s=document.querySelector("#priority"),u=document.querySelector("#description");function m(){!function(){for(let e=c.rows.length-1;e>=0;e--)c.deleteRow(e)}(),t.getProjects().forEach(((e,t)=>{let n=c.insertRow(t),o=document.createElement("button");o.onclick=p,o.innerText=e.name,o.dataset.indexNumber=t;let i=document.createElement("button");i.onclick=f,i.innerText="x",n.appendChild(o),n.appendChild(i)})),function(){let e=t.getActiveProject();t.getProjects().forEach(((t,c)=>{t.name===e.name&&document.querySelector(`[data-index-number="${c}"]`).classList.add("active")}))}()}function p(){t.switchActiveProject(t.getProjects()[this.dataset.indexNumber]),m(),k()}function v(){let e=n.value.trim();""===e||function(e){let c=t.getProjects(),n=!1;return c.forEach((t=>{e!==t.name||(n=!0)})),n}(e)||(t.createProject(e),m(),g([n]))}function f(){t.delProject(this.previousElementSibling.dataset.indexNumber),m()}function k(){let e=document.querySelector(".active-project-header"),c=t.getActiveProject();e.innerText=c.name,document.querySelector(".tasks").innerHTML="",function(){let e=t.getActiveProject(),c=document.querySelector(".tasks");e.getTasks().forEach(((e,t)=>{let n=document.createElement("div");n.classList.add("task");let o=document.createElement("div");o.classList.add("task-main");let i=document.createElement("button");i.onclick=y,i.classList.add("complete-task-btn"),e.complete&&i.classList.add("complete"),i.dataset.indexNumber=t;let a=document.createElement("h3");a.innerText=e.title,a.dataset.modal="edit",a.dataset.indexNumber=t,a.onclick=S;let r=document.createElement("button");r.classList.add("del-task-btn"),r.innerText="x",r.dataset.indexNumber=t,r.onclick=j;let l=document.createElement("div");l.classList.add("task-info");let d=document.createElement("div");d.classList.add("task-misc");let s=document.createElement("p");s.innerText=e.priority;let u=document.createElement("p");u.innerText=e.dueDate,d.appendChild(s),d.appendChild(u),l.appendChild(a),l.appendChild(d),o.appendChild(l),o.appendChild(r),n.appendChild(i),n.appendChild(o),c.appendChild(n)}))}()}function h(){let e=function(){let e=l.value,t=d.value,c=s.value,n=u.value;return g([l,d,s,u]),{title:`${e}`,description:`${n}`,dueDate:t,priority:`${c}`}}();t.getActiveProject().addTask(e.title,e.description,e.dueDate,e.priority),t.saveProjects(),k(),P()}function j(){t.getActiveProject().delTask(this.dataset.indexNumber),t.saveProjects(),k()}function y(){let e=this.dataset.indexNumber;this.classList.contains("complete")?this.classList.remove("complete"):this.classList.add("complete"),t.getActiveProject().toggleTaskCompletion(e),t.saveProjects()}function g(e){e.forEach((e=>{e.value=""}))}function E(){document.querySelector(".modal").classList.add("on"),a.classList.add("on")}function P(){document.querySelector(".modal").classList.remove("on"),a.classList.remove("on")}function S(){let e=document.querySelector(".modal-title"),c=this.dataset.indexNumber;e.innerText="Edit Task";let n=document.querySelector(".submit");n.innerText="Confirm Changes",n.dataset.indexNumber=c,n.removeEventListener("click",h),n.addEventListener("click",x),E(),function(e){let c=t.getActiveProject().getTasks()[e];l.value=c.title,d.value=c.dueDate,s.value=c.priority,u.value=c.description}(c)}function x(){let e=t.getActiveProject().getTasks()[+this.dataset.indexNumber];e.title=l.value,e.description=u.value,e.dueDate=d.value,e.priority=s.value,t.saveProjects(),k(),P()}o.addEventListener("click",v),n.addEventListener("keyup",(function(e){13===e.keyCode&&(e.preventDefault(),v())})),i.addEventListener("click",(function(){document.querySelector(".modal-title").innerText="Add Task";let e=document.querySelector(".submit");e.innerText="Add",e.removeEventListener("click",x),e.addEventListener("click",h),g([l,d,s,u]),E()})),a.addEventListener("click",P),r.forEach((e=>{e.addEventListener("click",P)})),m(),k()})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFrQmhCLFNBQVM2RixJQUN6QkEsRUFBT04saUJBQWlCLFFBQVNULEVBQVcsSUFtUTlDeEQsSUFDQXVCLEdBQVcsRUUzUmIsRSIsInNvdXJjZXMiOlsid2VicGFjazovL3RvLWRvLWxpc3QvLi9zcmMvbW9kdWxlcy90YXNrLmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QvLi9zcmMvbW9kdWxlcy9wcm9qZWN0LmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QvLi9zcmMvbW9kdWxlcy9zY3JlZW5Db250cm9sbGVyLmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QvLi9zcmMvbW9kdWxlcy9hcHBDb250cm9sbGVyLmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgdGFzayA9ICh0aXRsZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUsIHByaW9yaXR5LCBjb21wbGV0ZT1mYWxzZSkgPT4ge1xuXG4gIHJldHVybiB7XG4gICAgdGl0bGUsXG4gICAgZGVzY3JpcHRpb24sXG4gICAgZHVlRGF0ZSxcbiAgICBwcmlvcml0eSxcbiAgICBjb21wbGV0ZVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHRhc2siLCJpbXBvcnQgdGFzayBmcm9tICcuL3Rhc2suanMnXG5cbmNvbnN0IHByb2plY3QgPSAobmFtZSkgPT4ge1xuICBsZXQgdGFza3MgPSBbXVxuXG4gIGZ1bmN0aW9uIGFkZFRhc2sodGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlLCBwcmlvcml0eSwgY29tcGxldGU9ZmFsc2UpIHtcbiAgICBsZXQgbmV3VGFzayA9IHRhc2sodGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlLCBwcmlvcml0eSwgY29tcGxldGUpXG4gICAgdGFza3MucHVzaChuZXdUYXNrKVxuICB9XG5cbiAgZnVuY3Rpb24gZGVsVGFzayhpbmRleCkge1xuICAgIHRhc2tzLnNwbGljZShpbmRleCwgMSlcbiAgfVxuXG4gIGZ1bmN0aW9uIHRvZ2dsZVRhc2tDb21wbGV0aW9uKGluZGV4KSB7XG4gICAgbGV0IHRhc2sgPSB0YXNrc1tpbmRleF1cbiAgICB0YXNrLmNvbXBsZXRlID0gdGFzay5jb21wbGV0ZSA9PT0gZmFsc2UgPyB0cnVlIDogZmFsc2VcbiAgfVxuXG4gIGNvbnN0IGdldFRhc2tzID0gKCkgPT4gdGFza3NcblxuICByZXR1cm4ge1xuICAgIG5hbWUsXG4gICAgdGFza3MsXG4gICAgYWRkVGFzayxcbiAgICBkZWxUYXNrLFxuICAgIHRvZ2dsZVRhc2tDb21wbGV0aW9uLFxuICAgIGdldFRhc2tzXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgcHJvamVjdCIsImltcG9ydCBhcHBDb250cm9sbGVyIGZyb20gXCIuL2FwcENvbnRyb2xsZXIuanNcIlxuXG5jb25zdCBzY3JlZW5Db250cm9sbGVyID0gKCkgPT4ge1xuICBsZXQgYXBwID0gYXBwQ29udHJvbGxlcigpXG5cbiAgLy9jYWNoZSBET01cbiAgbGV0IHByb2plY3RzVGFibGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdHMnKVxuICBsZXQgYWRkUHJvamVjdElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC1wcm9qZWN0LWlucHV0JylcbiAgbGV0IGFkZFByb2plY3RCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkLXByb2plY3QtYnRuJylcbiAgbGV0IGFkZFRhc2tCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkLXRhc2stYnRuJylcbiAgbGV0IG1vZGFsT3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vdmVybGF5JylcbiAgbGV0IGNsb3NlTW9kYWxCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNsb3NlLW1vZGFsJylcbiAgbGV0IHRhc2tOYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFzay1uYW1lJylcbiAgbGV0IGRhdGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkYXRlJylcbiAgbGV0IHRhc2tQcmlvcml0eUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3ByaW9yaXR5JylcbiAgbGV0IGRlc2NyaXB0aW9uSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGVzY3JpcHRpb24nKVxuXG4gIC8vYmluZCBldmVudHNcbiAgYWRkUHJvamVjdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIF9hZGRQcm9qZWN0KVxuICBhZGRQcm9qZWN0SW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBfc3VibWl0UHJvamVjdElucHV0KVxuICBcbiAgLy9tb2RhbCBldmVudHNcbiAgYWRkVGFza0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIF9sb2FkQWRkVGFza01vZGFsKVxuICBtb2RhbE92ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBfY2xvc2VNb2RhbClcbiAgY2xvc2VNb2RhbEJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgX2Nsb3NlTW9kYWwpXG4gIH0pXG5cbiAgLy9wcm9qZWN0cyBmdW5jdGlvbnNcbiAgZnVuY3Rpb24gX2xvYWRQcm9qZWN0TGlzdCgpIHtcbiAgICBfcmVzZXRQcm9qZWN0TGlzdCgpXG4gICAgbGV0IHByb2plY3RzID0gYXBwLmdldFByb2plY3RzKClcbiAgICBwcm9qZWN0cy5mb3JFYWNoKChwcm9qZWN0LCBpbmRleCkgPT4ge1xuICAgICAgbGV0IHRhYmxlUm93ID0gcHJvamVjdHNUYWJsZS5pbnNlcnRSb3coaW5kZXgpXG5cbiAgICAgIGxldCBwcm9qZWN0SXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpXG4gICAgICBwcm9qZWN0SXRlbS5vbmNsaWNrID0gX21ha2VBY3RpdmVQcm9qZWN0XG4gICAgICBwcm9qZWN0SXRlbS5pbm5lclRleHQgPSBwcm9qZWN0Lm5hbWVcbiAgICAgIHByb2plY3RJdGVtLmRhdGFzZXQuaW5kZXhOdW1iZXIgPSBpbmRleFxuXG4gICAgICBsZXQgZGVsZXRlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJylcbiAgICAgIGRlbGV0ZUJ1dHRvbi5vbmNsaWNrID0gX2RlbGV0ZVByb2plY3RcbiAgICAgIGRlbGV0ZUJ1dHRvbi5pbm5lclRleHQgPSAneCdcblxuICAgICAgdGFibGVSb3cuYXBwZW5kQ2hpbGQocHJvamVjdEl0ZW0pXG4gICAgICB0YWJsZVJvdy5hcHBlbmRDaGlsZChkZWxldGVCdXR0b24pXG4gICAgfSlcbiAgICBfaGlnaGxpZ2h0QWN0aXZlUHJvamVjdCgpXG4gIH1cblxuICBmdW5jdGlvbiBfaGlnaGxpZ2h0QWN0aXZlUHJvamVjdCgpIHtcbiAgICBsZXQgYWN0aXZlUHJvamVjdCA9IGFwcC5nZXRBY3RpdmVQcm9qZWN0KClcbiAgICBsZXQgcHJvamVjdHMgPSBhcHAuZ2V0UHJvamVjdHMoKVxuICAgIHByb2plY3RzLmZvckVhY2goKHByb2plY3QsIGluZGV4KSA9PiB7XG4gICAgICBpZiAocHJvamVjdC5uYW1lID09PSBhY3RpdmVQcm9qZWN0Lm5hbWUpIHtcbiAgICAgICAgbGV0IGFjdGl2ZURPTUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1pbmRleC1udW1iZXI9XCIke2luZGV4fVwiXWApXG4gICAgICAgIGFjdGl2ZURPTUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJylcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgZnVuY3Rpb24gX3Jlc2V0UHJvamVjdExpc3QoKSB7XG4gICAgbGV0IHJvd0NvdW50ID0gcHJvamVjdHNUYWJsZS5yb3dzLmxlbmd0aFxuICAgIGZvciAobGV0IGkgPSByb3dDb3VudCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICBwcm9qZWN0c1RhYmxlLmRlbGV0ZVJvdyhpKVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIF9tYWtlQWN0aXZlUHJvamVjdCgpIHtcbiAgICBhcHAuc3dpdGNoQWN0aXZlUHJvamVjdChhcHAuZ2V0UHJvamVjdHMoKVt0aGlzLmRhdGFzZXQuaW5kZXhOdW1iZXJdKVxuICAgIF9sb2FkUHJvamVjdExpc3QoKVxuICAgIF9sb2FkVGFza3MoKVxuICB9XG5cbiAgZnVuY3Rpb24gX2FkZFByb2plY3QoKSB7XG4gICAgbGV0IG5ld1Byb2plY3ROYW1lID0gYWRkUHJvamVjdElucHV0LnZhbHVlLnRyaW0oKVxuICAgIGlmIChuZXdQcm9qZWN0TmFtZSA9PT0gJycgfHwgX2NoZWNrRHVwbGljYXRlUHJvamVjdChuZXdQcm9qZWN0TmFtZSkpIHJldHVyblxuICAgIGFwcC5jcmVhdGVQcm9qZWN0KG5ld1Byb2plY3ROYW1lKVxuICAgIF9sb2FkUHJvamVjdExpc3QoKVxuICAgIF9yZXNldElucHV0RmllbGRzKFthZGRQcm9qZWN0SW5wdXRdKVxuICB9XG5cbiAgZnVuY3Rpb24gX2NoZWNrRHVwbGljYXRlUHJvamVjdChuZXdQcm9qZWN0TmFtZSkge1xuICAgIGxldCBwcm9qZWN0cyA9IGFwcC5nZXRQcm9qZWN0cygpXG4gICAgbGV0IGR1cGxpY2F0ZVJlc3VsdCA9IGZhbHNlXG4gICAgcHJvamVjdHMuZm9yRWFjaCgocHJvamVjdCkgPT4ge1xuICAgICAgaWYgKG5ld1Byb2plY3ROYW1lID09PSBwcm9qZWN0Lm5hbWUpIHtcbiAgICAgICAgZHVwbGljYXRlUmVzdWx0ID0gdHJ1ZVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICB9KVxuXG4gICAgcmV0dXJuIGR1cGxpY2F0ZVJlc3VsdFxuICB9XG5cbiAgZnVuY3Rpb24gX2RlbGV0ZVByb2plY3QoKSB7XG4gICAgYXBwLmRlbFByb2plY3QodGhpcy5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLmRhdGFzZXQuaW5kZXhOdW1iZXIpXG4gICAgX2xvYWRQcm9qZWN0TGlzdCgpXG4gIH1cblxuICBmdW5jdGlvbiBfc3VibWl0UHJvamVjdElucHV0KGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IDEzKSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICBfYWRkUHJvamVjdCgpXG4gICAgfVxuICB9XG5cbiAgLy90YXNrcyBmdW5jdGlvbnNcbiAgZnVuY3Rpb24gX2xvYWRUYXNrcygpIHtcbiAgICBsZXQgcHJvamVjdE5hbWVIZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWN0aXZlLXByb2plY3QtaGVhZGVyJylcbiAgICBsZXQgYWN0aXZlUHJvamVjdCA9IGFwcC5nZXRBY3RpdmVQcm9qZWN0KClcbiAgICBwcm9qZWN0TmFtZUhlYWRlci5pbm5lclRleHQgPSBhY3RpdmVQcm9qZWN0Lm5hbWVcbiAgICBcbiAgICBfcmVzZXRUYXNrcygpXG4gICAgX2NyZWF0ZVRhc2tzRE9NKClcbiAgICBcbiAgfVxuXG4gIGZ1bmN0aW9uIF9yZXNldFRhc2tzKCkge1xuICAgIGxldCB0YXNrcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YXNrcycpXG4gICAgdGFza3MuaW5uZXJIVE1MID0gJydcbiAgfVxuXG4gIGZ1bmN0aW9uIF9jcmVhdGVUYXNrc0RPTSgpIHtcbiAgICBsZXQgYWN0aXZlUHJvamVjdCA9IGFwcC5nZXRBY3RpdmVQcm9qZWN0KClcbiAgICBsZXQgdGFza3NEaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGFza3MnKVxuXG4gICAgYWN0aXZlUHJvamVjdC5nZXRUYXNrcygpLmZvckVhY2goKHRhc2ssIGluZGV4KSA9PiB7XG4gICAgICBsZXQgdGFza0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICB0YXNrRGl2LmNsYXNzTGlzdC5hZGQoJ3Rhc2snKVxuICAgICAgbGV0IHRhc2tNYWluID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgIHRhc2tNYWluLmNsYXNzTGlzdC5hZGQoJ3Rhc2stbWFpbicpXG4gICAgICBsZXQgY29tcGxldGVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKVxuICAgICAgY29tcGxldGVCdXR0b24ub25jbGljayA9IF90b2dnbGVDb21wbGV0ZVRhc2tcbiAgICAgIGNvbXBsZXRlQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2NvbXBsZXRlLXRhc2stYnRuJylcbiAgICAgIGlmICh0YXNrLmNvbXBsZXRlKSBjb21wbGV0ZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdjb21wbGV0ZScpXG4gICAgICBjb21wbGV0ZUJ1dHRvbi5kYXRhc2V0LmluZGV4TnVtYmVyID0gaW5kZXhcbiAgICAgIGxldCB0YXNrTmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gzJylcbiAgICAgIHRhc2tOYW1lLmlubmVyVGV4dCA9IHRhc2sudGl0bGVcbiAgICAgIHRhc2tOYW1lLmRhdGFzZXQubW9kYWwgPSAnZWRpdCdcbiAgICAgIHRhc2tOYW1lLmRhdGFzZXQuaW5kZXhOdW1iZXIgPSBpbmRleFxuICAgICAgdGFza05hbWUub25jbGljayA9IF9sb2FkRWRpdFRhc2tNb2RhbFxuICAgICAgbGV0IGRlbFRhc2tCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKVxuICAgICAgZGVsVGFza0J1dHRvbi5jbGFzc0xpc3QuYWRkKCdkZWwtdGFzay1idG4nKVxuICAgICAgZGVsVGFza0J1dHRvbi5pbm5lclRleHQgPSAneCdcbiAgICAgIGRlbFRhc2tCdXR0b24uZGF0YXNldC5pbmRleE51bWJlciA9IGluZGV4XG4gICAgICBkZWxUYXNrQnV0dG9uLm9uY2xpY2sgPSBfZGVsZXRlVGFza1xuICAgICAgbGV0IHRhc2tJbmZvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgIHRhc2tJbmZvLmNsYXNzTGlzdC5hZGQoJ3Rhc2staW5mbycpXG4gICAgICBsZXQgdGFza01pc2MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgdGFza01pc2MuY2xhc3NMaXN0LmFkZCgndGFzay1taXNjJylcbiAgICAgIGxldCB0YXNrUHJpb3JpdHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJylcbiAgICAgIHRhc2tQcmlvcml0eS5pbm5lclRleHQgPSB0YXNrLnByaW9yaXR5XG4gICAgICBsZXQgdGFza0RhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJylcbiAgICAgIHRhc2tEYXRlLmlubmVyVGV4dCA9IHRhc2suZHVlRGF0ZVxuXG4gICAgICB0YXNrTWlzYy5hcHBlbmRDaGlsZCh0YXNrUHJpb3JpdHkpXG4gICAgICB0YXNrTWlzYy5hcHBlbmRDaGlsZCh0YXNrRGF0ZSlcblxuICAgICAgdGFza0luZm8uYXBwZW5kQ2hpbGQodGFza05hbWUpXG4gICAgICB0YXNrSW5mby5hcHBlbmRDaGlsZCh0YXNrTWlzYylcblxuICAgICAgdGFza01haW4uYXBwZW5kQ2hpbGQodGFza0luZm8pXG4gICAgICB0YXNrTWFpbi5hcHBlbmRDaGlsZChkZWxUYXNrQnV0dG9uKVxuXG4gICAgICB0YXNrRGl2LmFwcGVuZENoaWxkKGNvbXBsZXRlQnV0dG9uKVxuICAgICAgdGFza0Rpdi5hcHBlbmRDaGlsZCh0YXNrTWFpbilcblxuICAgICAgdGFza3NEaXYuYXBwZW5kQ2hpbGQodGFza0RpdilcbiAgICB9KVxuICB9XG5cbiAgZnVuY3Rpb24gX3JldHJpZXZlQWRkVGFza0lucHV0cygpIHtcbiAgICBsZXQgdGFza05hbWVWYWx1ZSA9IHRhc2tOYW1lSW5wdXQudmFsdWVcbiAgICBsZXQgZGF0ZVZhbHVlID0gZGF0ZUlucHV0LnZhbHVlXG4gICAgbGV0IHRhc2tQcmlvcml0eVZhbHVlID0gdGFza1ByaW9yaXR5SW5wdXQudmFsdWVcbiAgICBsZXQgZGVzY3JpcHRpb25WYWx1ZSA9IGRlc2NyaXB0aW9uSW5wdXQudmFsdWVcblxuICAgIF9yZXNldElucHV0RmllbGRzKFt0YXNrTmFtZUlucHV0LCBkYXRlSW5wdXQsIHRhc2tQcmlvcml0eUlucHV0LCBkZXNjcmlwdGlvbklucHV0XSlcblxuICAgIHJldHVybiB7XG4gICAgICB0aXRsZTpgJHt0YXNrTmFtZVZhbHVlfWAsXG4gICAgICBkZXNjcmlwdGlvbjpgJHtkZXNjcmlwdGlvblZhbHVlfWAsXG4gICAgICBkdWVEYXRlOmRhdGVWYWx1ZSxcbiAgICAgIHByaW9yaXR5OmAke3Rhc2tQcmlvcml0eVZhbHVlfWBcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBfc3VibWl0QWRkVGFza0lucHV0cygpIHtcbiAgICBsZXQgaW5wdXRWYWx1ZXMgPSBfcmV0cmlldmVBZGRUYXNrSW5wdXRzKClcbiAgICBhcHAuZ2V0QWN0aXZlUHJvamVjdCgpLmFkZFRhc2soaW5wdXRWYWx1ZXMudGl0bGUsIGlucHV0VmFsdWVzLmRlc2NyaXB0aW9uLCBpbnB1dFZhbHVlcy5kdWVEYXRlLCBpbnB1dFZhbHVlcy5wcmlvcml0eSlcblxuICAgIGFwcC5zYXZlUHJvamVjdHMoKVxuICAgIF9sb2FkVGFza3MoKVxuICAgIF9jbG9zZU1vZGFsKClcbiAgfVxuXG4gIGZ1bmN0aW9uIF9kZWxldGVUYXNrKCkge1xuICAgIGxldCBhY3RpdmVQcm9qZWN0ID0gYXBwLmdldEFjdGl2ZVByb2plY3QoKVxuICAgIGFjdGl2ZVByb2plY3QuZGVsVGFzayh0aGlzLmRhdGFzZXQuaW5kZXhOdW1iZXIpXG5cbiAgICBhcHAuc2F2ZVByb2plY3RzKClcbiAgICBfbG9hZFRhc2tzKClcbiAgfVxuXG4gIGZ1bmN0aW9uIF90b2dnbGVDb21wbGV0ZVRhc2soKSB7XG4gICAgbGV0IGluZGV4ID0gdGhpcy5kYXRhc2V0LmluZGV4TnVtYmVyXG4gICAgXG4gICAgaWYgKHRoaXMuY2xhc3NMaXN0LmNvbnRhaW5zKCdjb21wbGV0ZScpKSB7XG4gICAgICB0aGlzLmNsYXNzTGlzdC5yZW1vdmUoJ2NvbXBsZXRlJylcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKCdjb21wbGV0ZScpXG4gICAgfVxuXG4gICAgYXBwLmdldEFjdGl2ZVByb2plY3QoKS50b2dnbGVUYXNrQ29tcGxldGlvbihpbmRleClcbiAgICBhcHAuc2F2ZVByb2plY3RzKClcbiAgfVxuXG4gIC8vZ2VuZXJhbCBmdW5jdGlvbnNcbiAgZnVuY3Rpb24gX3Jlc2V0SW5wdXRGaWVsZHMoaW5wdXRzKSB7XG4gICAgaW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dC52YWx1ZSA9ICcnXG4gICAgfSlcbiAgfVxuXG4gIC8vbW9kYWwgZnVuY3Rpb25zXG4gIGZ1bmN0aW9uIF9vcGVuTW9kYWwoKSB7XG4gICAgbGV0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsJylcbiAgICBtb2RhbC5jbGFzc0xpc3QuYWRkKCdvbicpXG4gICAgbW9kYWxPdmVybGF5LmNsYXNzTGlzdC5hZGQoJ29uJylcbiAgfVxuXG4gIGZ1bmN0aW9uIF9jbG9zZU1vZGFsKCkge1xuICAgIGxldCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbCcpXG4gICAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnb24nKVxuICAgIG1vZGFsT3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKCdvbicpXG4gIH1cblxuICBmdW5jdGlvbiBfbG9hZEFkZFRhc2tNb2RhbCgpIHtcbiAgICBsZXQgbW9kYWxUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC10aXRsZScpXG4gICAgbW9kYWxUaXRsZS5pbm5lclRleHQgPSAnQWRkIFRhc2snXG4gICAgbGV0IHN1Ym1pdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zdWJtaXQnKVxuICAgIHN1Ym1pdEJ1dHRvbi5pbm5lclRleHQgPSAnQWRkJ1xuICAgIHN1Ym1pdEJ1dHRvbi5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIF9lZGl0VGFzaylcbiAgICBzdWJtaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBfc3VibWl0QWRkVGFza0lucHV0cylcbiAgICBfcmVzZXRJbnB1dEZpZWxkcyhbdGFza05hbWVJbnB1dCwgZGF0ZUlucHV0LCB0YXNrUHJpb3JpdHlJbnB1dCwgZGVzY3JpcHRpb25JbnB1dF0pXG4gICAgX29wZW5Nb2RhbCgpXG4gIH1cblxuICBmdW5jdGlvbiBfbG9hZEVkaXRUYXNrTW9kYWwoKSB7XG4gICAgbGV0IG1vZGFsVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtdGl0bGUnKVxuICAgIGxldCBpbmRleCA9IHRoaXMuZGF0YXNldC5pbmRleE51bWJlclxuICAgIG1vZGFsVGl0bGUuaW5uZXJUZXh0ID0gJ0VkaXQgVGFzaydcbiAgICBsZXQgc3VibWl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnN1Ym1pdCcpXG4gICAgc3VibWl0QnV0dG9uLmlubmVyVGV4dCA9ICdDb25maXJtIENoYW5nZXMnXG4gICAgc3VibWl0QnV0dG9uLmRhdGFzZXQuaW5kZXhOdW1iZXIgPSBpbmRleFxuICAgIHN1Ym1pdEJ1dHRvbi5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIF9zdWJtaXRBZGRUYXNrSW5wdXRzKVxuICAgIHN1Ym1pdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIF9lZGl0VGFzaylcbiAgICBfb3Blbk1vZGFsKClcbiAgICBfbG9hZEVkaXRUYXNrSW5wdXRWYWx1ZXMoaW5kZXgpXG4gIH1cblxuICBmdW5jdGlvbiBfZWRpdFRhc2soKSB7XG4gICAgbGV0IHRhc2sgPSBhcHAuZ2V0QWN0aXZlUHJvamVjdCgpLmdldFRhc2tzKClbK3RoaXMuZGF0YXNldC5pbmRleE51bWJlcl1cblxuICAgIHRhc2sudGl0bGUgPSB0YXNrTmFtZUlucHV0LnZhbHVlXG4gICAgdGFzay5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uSW5wdXQudmFsdWVcbiAgICB0YXNrLmR1ZURhdGUgPSBkYXRlSW5wdXQudmFsdWVcbiAgICB0YXNrLnByaW9yaXR5ID0gdGFza1ByaW9yaXR5SW5wdXQudmFsdWVcblxuICAgIGFwcC5zYXZlUHJvamVjdHMoKVxuICAgIF9sb2FkVGFza3MoKVxuICAgIF9jbG9zZU1vZGFsKClcbiAgfVxuXG4gIGZ1bmN0aW9uIF9sb2FkRWRpdFRhc2tJbnB1dFZhbHVlcyhpbmRleCkge1xuICAgIGxldCB0YXNrID0gYXBwLmdldEFjdGl2ZVByb2plY3QoKS5nZXRUYXNrcygpW2luZGV4XVxuXG4gICAgdGFza05hbWVJbnB1dC52YWx1ZSA9IHRhc2sudGl0bGVcbiAgICBkYXRlSW5wdXQudmFsdWUgPSB0YXNrLmR1ZURhdGVcbiAgICB0YXNrUHJpb3JpdHlJbnB1dC52YWx1ZSA9IHRhc2sucHJpb3JpdHlcbiAgICBkZXNjcmlwdGlvbklucHV0LnZhbHVlID0gdGFzay5kZXNjcmlwdGlvblxuICB9XG5cbiAgX2xvYWRQcm9qZWN0TGlzdCgpXG4gIF9sb2FkVGFza3MoKVxufVxuXG5leHBvcnQgZGVmYXVsdCBzY3JlZW5Db250cm9sbGVyIiwiaW1wb3J0IHByb2plY3QgZnJvbSBcIi4vcHJvamVjdC5qc1wiXG5cbmNvbnN0IGFwcENvbnRyb2xsZXIgPSAoKSA9PiB7XG4gIGxldCBwcm9qZWN0cyA9IFtdXG4gIGxldCBhY3RpdmVQcm9qZWN0XG5cbiAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzYXZlZFByb2plY3RzJykgPT09IG51bGwpIHtcbiAgICBhY3RpdmVQcm9qZWN0ID0gcHJvamVjdCgnRGVmYXVsdCcpXG4gICAgcHJvamVjdHMucHVzaChhY3RpdmVQcm9qZWN0KVxuICB9IGVsc2Uge1xuICAgIGxvYWRQcm9qZWN0cygpXG4gIH1cblxuICBmdW5jdGlvbiBzYXZlUHJvamVjdHMoKSB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3NhdmVkUHJvamVjdHMnLCBcbiAgICAgIEpTT04uc3RyaW5naWZ5KHsgJ3Byb2plY3RzJzogcHJvamVjdHMgfSlcbiAgICApXG4gIH1cblxuICBmdW5jdGlvbiBsb2FkUHJvamVjdHMoKSB7XG4gICAgbGV0IHByb2plY3RzQXJyID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc2F2ZWRQcm9qZWN0cycpKVxuXG4gICAgcHJvamVjdHNBcnJbJ3Byb2plY3RzJ10uZm9yRWFjaCgob2JqKSA9PiB7XG4gICAgICBsZXQgbmV3UHJvamVjdCA9IHByb2plY3Qob2JqWyduYW1lJ10pXG5cbiAgICAgIG9ialsndGFza3MnXS5mb3JFYWNoKCh0YXNrKSA9PiB7XG4gICAgICAgIG5ld1Byb2plY3QuYWRkVGFzayh0YXNrWyd0aXRsZSddLCB0YXNrWydkZXNjcmlwdGlvbiddLCB0YXNrWydkdWVEYXRlJ10sIHRhc2tbJ3ByaW9yaXR5J10sIHRhc2tbJ2NvbXBsZXRlJ10pXG4gICAgICB9KVxuXG4gICAgICBwcm9qZWN0cy5wdXNoKG5ld1Byb2plY3QpXG4gICAgICBhY3RpdmVQcm9qZWN0ID0gcHJvamVjdHNbMF1cbiAgICB9KVxuICB9XG5cblxuICBmdW5jdGlvbiBjcmVhdGVQcm9qZWN0KG5hbWUpIHtcbiAgICBsZXQgbmV3UHJvamVjdCA9IHByb2plY3QobmFtZSlcbiAgICBwcm9qZWN0cy5wdXNoKG5ld1Byb2plY3QpXG4gICAgLy9zYXZlXG4gICAgc2F2ZVByb2plY3RzKClcbiAgfVxuXG4gIGZ1bmN0aW9uIHN3aXRjaEFjdGl2ZVByb2plY3QobmV3QWN0aXZlUHJvamVjdCkge1xuICAgIGFjdGl2ZVByb2plY3QgPSBuZXdBY3RpdmVQcm9qZWN0XG4gIH1cblxuICBmdW5jdGlvbiBkZWxQcm9qZWN0KGluZGV4KSB7XG4gICAgaWYgKHByb2plY3RzW2luZGV4XSA9PT0gYWN0aXZlUHJvamVjdCkgcmV0dXJuXG5cbiAgICBwcm9qZWN0cy5zcGxpY2UoaW5kZXgsIDEpXG4gICAgLy9zYXZlXG4gICAgc2F2ZVByb2plY3RzKClcbiAgfVxuXG4gIGNvbnN0IGdldEFjdGl2ZVByb2plY3QgPSAoKSA9PiBhY3RpdmVQcm9qZWN0XG5cbiAgY29uc3QgZ2V0UHJvamVjdHMgPSAoKSA9PiBwcm9qZWN0c1xuXG4gIHJldHVybiB7XG4gICAgY3JlYXRlUHJvamVjdCxcbiAgICBzd2l0Y2hBY3RpdmVQcm9qZWN0LFxuICAgIGRlbFByb2plY3QsXG4gICAgZ2V0QWN0aXZlUHJvamVjdCxcbiAgICBnZXRQcm9qZWN0cyxcbiAgICBzYXZlUHJvamVjdHMsXG4gICAgbG9hZFByb2plY3RzXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgYXBwQ29udHJvbGxlciIsImltcG9ydCBzY3JlZW5Db250cm9sbGVyIGZyb20gJy4vbW9kdWxlcy9zY3JlZW5Db250cm9sbGVyLmpzJ1xuXG5zY3JlZW5Db250cm9sbGVyKCkiXSwibmFtZXMiOlsibmFtZSIsInRhc2tzIiwiYWRkVGFzayIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJkdWVEYXRlIiwicHJpb3JpdHkiLCJjb21wbGV0ZSIsIm5ld1Rhc2siLCJwdXNoIiwiZGVsVGFzayIsImluZGV4Iiwic3BsaWNlIiwidG9nZ2xlVGFza0NvbXBsZXRpb24iLCJ0YXNrIiwiZ2V0VGFza3MiLCJhcHAiLCJhY3RpdmVQcm9qZWN0IiwicHJvamVjdHMiLCJzYXZlUHJvamVjdHMiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsImxvYWRQcm9qZWN0cyIsInBhcnNlIiwiZ2V0SXRlbSIsImZvckVhY2giLCJvYmoiLCJuZXdQcm9qZWN0IiwiY3JlYXRlUHJvamVjdCIsInN3aXRjaEFjdGl2ZVByb2plY3QiLCJuZXdBY3RpdmVQcm9qZWN0IiwiZGVsUHJvamVjdCIsImdldEFjdGl2ZVByb2plY3QiLCJnZXRQcm9qZWN0cyIsInByb2plY3RzVGFibGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRQcm9qZWN0SW5wdXQiLCJhZGRQcm9qZWN0QnV0dG9uIiwiYWRkVGFza0J1dHRvbiIsIm1vZGFsT3ZlcmxheSIsImNsb3NlTW9kYWxCdXR0b25zIiwicXVlcnlTZWxlY3RvckFsbCIsInRhc2tOYW1lSW5wdXQiLCJkYXRlSW5wdXQiLCJ0YXNrUHJpb3JpdHlJbnB1dCIsImRlc2NyaXB0aW9uSW5wdXQiLCJfbG9hZFByb2plY3RMaXN0IiwiaSIsInJvd3MiLCJsZW5ndGgiLCJkZWxldGVSb3ciLCJfcmVzZXRQcm9qZWN0TGlzdCIsInByb2plY3QiLCJ0YWJsZVJvdyIsImluc2VydFJvdyIsInByb2plY3RJdGVtIiwiY3JlYXRlRWxlbWVudCIsIm9uY2xpY2siLCJfbWFrZUFjdGl2ZVByb2plY3QiLCJpbm5lclRleHQiLCJkYXRhc2V0IiwiaW5kZXhOdW1iZXIiLCJkZWxldGVCdXR0b24iLCJfZGVsZXRlUHJvamVjdCIsImFwcGVuZENoaWxkIiwiY2xhc3NMaXN0IiwiYWRkIiwiX2hpZ2hsaWdodEFjdGl2ZVByb2plY3QiLCJ0aGlzIiwiX2xvYWRUYXNrcyIsIl9hZGRQcm9qZWN0IiwibmV3UHJvamVjdE5hbWUiLCJ2YWx1ZSIsInRyaW0iLCJkdXBsaWNhdGVSZXN1bHQiLCJfY2hlY2tEdXBsaWNhdGVQcm9qZWN0IiwiX3Jlc2V0SW5wdXRGaWVsZHMiLCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nIiwicHJvamVjdE5hbWVIZWFkZXIiLCJpbm5lckhUTUwiLCJ0YXNrc0RpdiIsInRhc2tEaXYiLCJ0YXNrTWFpbiIsImNvbXBsZXRlQnV0dG9uIiwiX3RvZ2dsZUNvbXBsZXRlVGFzayIsInRhc2tOYW1lIiwibW9kYWwiLCJfbG9hZEVkaXRUYXNrTW9kYWwiLCJkZWxUYXNrQnV0dG9uIiwiX2RlbGV0ZVRhc2siLCJ0YXNrSW5mbyIsInRhc2tNaXNjIiwidGFza1ByaW9yaXR5IiwidGFza0RhdGUiLCJfY3JlYXRlVGFza3NET00iLCJfc3VibWl0QWRkVGFza0lucHV0cyIsImlucHV0VmFsdWVzIiwidGFza05hbWVWYWx1ZSIsImRhdGVWYWx1ZSIsInRhc2tQcmlvcml0eVZhbHVlIiwiZGVzY3JpcHRpb25WYWx1ZSIsIl9yZXRyaWV2ZUFkZFRhc2tJbnB1dHMiLCJfY2xvc2VNb2RhbCIsImNvbnRhaW5zIiwicmVtb3ZlIiwiaW5wdXRzIiwiaW5wdXQiLCJfb3Blbk1vZGFsIiwibW9kYWxUaXRsZSIsInN1Ym1pdEJ1dHRvbiIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJhZGRFdmVudExpc3RlbmVyIiwiX2VkaXRUYXNrIiwiX2xvYWRFZGl0VGFza0lucHV0VmFsdWVzIiwiZXZlbnQiLCJrZXlDb2RlIiwicHJldmVudERlZmF1bHQiLCJidXR0b24iXSwic291cmNlUm9vdCI6IiJ9